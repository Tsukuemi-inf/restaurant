DROP TABLE IF EXISTS dish CASCADE;
DROP TABLE IF EXISTS category CASCADE;

CREATE TABLE category (
    id SERIAL PRIMARY KEY,
    name VARCHAR(255) UNIQUE
);

CREATE TABLE dish (
    id SERIAL PRIMARY KEY,
    name VARCHAR(255) NOT NULL,
    price INTEGER NOT NULL,
    description VARCHAR(255) NOT NULL,
    time_to_cook VARCHAR(3),
    dish_weight VARCHAR(255) NOT NULL,
    dish_status BOOLEAN DEFAULT TRUE, 
    composition TEXT[],
    image VARCHAR(255),
    categoryid INT NOT NULL REFERENCES category(id) ON DELETE CASCADE
);

INSERT INTO category (name) 
VALUES 
('Пицца'),
('Паста'),
('Салаты'),
('Супы'),
('Десерты');

-- Добавление по 3 блюда для каждой категории
INSERT INTO dish (name, price, description, time_to_cook, dish_weight, dish_status, composition, image, categoryid)
VALUES
-- Категория 1: Пицца
('Маргарита', 650, 'Классическая пицца с томатным соусом и моцареллой', '20', '400g', TRUE, ARRAY['Томатный соус', 'Моцарелла', 'Базилик'], 'margherita.jpg', 1),
('Пепперони', 800, 'Пицца с острой колбасой пепперони и сыром', '22', '450g', TRUE, ARRAY['Томатный соус', 'Пепперони', 'Моцарелла'], 'pepperoni.jpg', 1),
('Четыре сыра', 900, 'Пицца с миксом сыров: моцарелла, пармезан, горгонзола, чеддер', '25', '420g', TRUE, ARRAY['Моцарелла', 'Пармезан', 'Горгонзола', 'Чеддер'], 'four_cheeses.jpg', 1),
-- Категория 2: Паста
('Карбонара', 700, 'Паста с беконом, яйцом и пармезаном', '15', '300g', TRUE, ARRAY['Спагетти', 'Бекон', 'Яйцо', 'Пармезан'], 'carbonara.jpg', 2),
('Болоньезе', 750, 'Паста с мясным соусом и томатами', '18', '320g', TRUE, ARRAY['Спагетти', 'Фарш', 'Томаты', 'Пармезан'], 'bolognese.jpg', 2),
('Песто', 680, 'Паста с соусом песто и кедровыми орешками', '15', '280g', TRUE, ARRAY['Пенне', 'Песто', 'Кедровые орешки', 'Пармезан'], 'pesto.jpg', 2),
-- Категория 3: Салаты
('Цезарь', 550, 'Салат с курицей, сухариками и соусом Цезарь', '10', '250g', TRUE, ARRAY['Курица', 'Салат романо', 'Сухарики', 'Соус Цезарь'], 'caesar.jpg', 3),
('Греческий', 500, 'Салат с огурцами, помидорами, фетой и оливками', '8', '220g', TRUE, ARRAY['Огурцы', 'Помидоры', 'Фета', 'Оливки'], 'greek.jpg', 3),
('Капрезе', 600, 'Салат с моцареллой, томатами и базиликом', '8', '200g', TRUE, ARRAY['Моцарелла', 'Томаты', 'Базилик', 'Оливковое масло'], 'caprese.jpg', 3),
-- Категория 4: Супы
('Томатный суп', 400, 'Суп из свежих томатов с базиликом', '15', '300g', TRUE, ARRAY['Томаты', 'Базилик', 'Сливки'], 'tomato_soup.jpg', 4),
('Крем-суп из грибов', 450, 'Нежный суп с шампиньонами и сливками', '18', '280g', TRUE, ARRAY['Шампиньоны', 'Сливки', 'Лук'], 'mushroom_soup.jpg', 4),
('Борщ', 420, 'Классический борщ со свеклой и сметаной', '20', '350g', TRUE, ARRAY['Свекла', 'Говядина', 'Картофель', 'Сметана'], 'borsch.jpg', 4),
-- Категория 5: Десерты
('Тирамису', 450, 'Итальянский десерт с маскарпоне и кофе', '10', '150g', TRUE, ARRAY['Маскарпоне', 'Кофе', 'Савоярди', 'Какао'], 'tiramisu.jpg', 5),
('Панна Котта', 400, 'Нежный сливочный десерт с ягодным соусом', '10', '120g', TRUE, ARRAY['Сливки', 'Ягодный соус', 'Ваниль'], 'panna_cotta.jpg', 5),
('Чизкейк', 480, 'Классический чизкейк с ягодным топпингом', '10', '140g', TRUE, ARRAY['Сливочный сыр', 'Печенье', 'Ягоды'], 'cheesecake.jpg', 5);